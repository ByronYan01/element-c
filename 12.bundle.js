"use strict";(self.webpackChunksf_ui=self.webpackChunksf_ui||[]).push([[12],{9012:function(e,t,n){n.r(t),n.d(t,{default:function(){return r}});var a={};n.r(a),n.d(a,{tableSource:function(){return l}});const l=[{date:"2016-05-02",name:"111",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"2221",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"33331",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"4444",address:"上海市普陀区金沙江路 1516 弄"},{date:"2016-05-02",name:"5555",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"6666",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"77777",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"888",address:"上海市普陀区金沙江路 1516 弄"},{date:"2016-05-02",name:"9999",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"0000",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"qqqq",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"wwww",address:"上海市普陀区金沙江路 1516 弄"},{date:"2016-05-01",name:"aaa",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"sssss",address:"上海市普陀区金沙江路 1516 弄"}];var s={name:"component-doc",components:{"element-demo0":function(){const{tableSource:e}=a;return{render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[[n("div",[n("div",{staticClass:"search-wrap"},[n("el-input",{staticClass:"search-input",model:{value:e.nameStr,callback:function(t){e.nameStr=t},expression:"nameStr"}}),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1),e._v(" "),n("div",{staticClass:"show-wrap"},[e._v(e._s("已选择"+e.tableSelectList.length+"个"))]),e._v(" "),n("el-table",{ref:"elTable",attrs:{border:"",data:e.tableData,height:"280"},on:{select:e.select,"select-all":e.selectAll}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{prop:"date",label:"日期",width:"150"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),e._v(" "),n("el-table-column",{attrs:{prop:"address",label:"地址"}})],1),e._v(" "),n("el-pagination",{attrs:{layout:"total, prev, pager, next",total:e.total,"current-page":e.pageNum},on:{"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t},"current-change":e.handleCurrentChange}}),e._v(" "),n("div",[e._v(e._s(e.selectNameList))])],1)]],2)},staticRenderFns:[],...{name:"tableRowCheck",data(){return{pageNum:1,pageSize:10,total:15,nameStr:"",tableData:[],rowKey:"name",tableSelectList:[]}},created(){console.log("tableSource===",e),this.getList()},computed:{selectNameList(){return this.tableSelectList.map((e=>e.name))}},watch:{tableData(){this.rowSelect()}},methods:{select(e,t){const n=e.some((e=>e[this.rowKey]===t[this.rowKey]));this.rowChangeAll(t,n)},selectAll(e){let t=!0,n=e.slice();n.length||(t=!1,n=this.tableData.slice()),n.forEach((e=>{this.rowChangeAll(e,t)}))},rowChangeAll(e,t){const n=this.tableSelectList.findIndex((t=>t[this.rowKey]===e[this.rowKey]));-1===n?t&&this.tableSelectList.push(e):t||this.tableSelectList.splice(n,1)},rowSelect(){this.$nextTick((()=>{this.tableSelectList.forEach((e=>{const t=this.tableData.find((t=>e[this.rowKey]==t[this.rowKey]));t&&this.$refs.elTable.toggleRowSelection(t,!0)}))}))},handleCurrentChange(){this.getList(this.nameStr)},search(){this.pageNum=1,this.getList(this.nameStr)},getList(t){console.log("nameStr===",t);let n=e;t&&(n=e.filter((e=>e.name.includes(t)))),1===this.pageNum?this.tableData=n.slice(0,10):this.tableData=n.slice(10)}}}}}()}},i=s,r=(0,n(1900).Z)(i,(function(){var e=this,t=e._self._c;return t("section",{staticClass:"content element-doc"},[e._m(0),t("demo-block",[t("div",[t("p",[e._v("用户勾选,只能手动取消,其他操作不影响;支持自动勾选")])]),t("template",{slot:"source"},[t("element-demo0")],1),t("template",{slot:"highlight"},[t("pre",{pre:!0},[t("code",{pre:!0,attrs:{class:"html"}},[e._v('<template>\n  <div>\n    <div class="search-wrap">\n      <el-input class="search-input" v-model="nameStr"></el-input>\n      <el-button type="primary" @click="search">查询</el-button>\n    </div>\n    <div class="show-wrap">{{ `已选择${tableSelectList.length}个` }}</div>\n    <el-table border ref="elTable" :data="tableData" @select="select" @select-all="selectAll" height="280">\n      <el-table-column type="selection" width="55"> </el-table-column>\n      <el-table-column prop="date" label="日期" width="150"> </el-table-column>\n      <el-table-column prop="name" label="姓名" width="120"> </el-table-column>\n      <el-table-column prop="address" label="地址"> </el-table-column>\n    </el-table>\n    <el-pagination layout="total, prev, pager, next" :total="total" :current-page.sync="pageNum" @current-change="handleCurrentChange"> </el-pagination>\n    <div>{{ selectNameList }}</div>\n  </div>\n</template>\n<script>\n  import { tableSource } from \'../data/tableRowCheck\'\n  export default {\n    name: \'tableRowCheck\',\n    data() {\n      return {\n        pageNum: 1,\n        pageSize: 10,\n        total: 15,\n        nameStr: \'\',\n        tableData: [],\n        rowKey: \'name\',\n        tableSelectList: [],\n      }\n    },\n    created() {\n      console.log(\'tableSource===\', tableSource)\n      this.getList()\n    },\n    computed: {\n      selectNameList() {\n        return this.tableSelectList.map((item) => item.name)\n      },\n    },\n    watch: {\n      tableData() {\n        this.rowSelect()\n      },\n    },\n    methods: {\n      // 单个勾选、取消\n      select(selection, row) {\n        const isAdd = selection.some((selectRow) => selectRow[this.rowKey] === row[this.rowKey])\n        this.rowChangeAll(row, isAdd)\n      },\n      // 当页勾选、取消\n      selectAll(selection) {\n        // 默认当页全选\n        let isAdd = true\n        let changeSelect = selection.slice()\n        if (!changeSelect.length) {\n          // 取消当页全选，获取表格当前页所有数据\n          isAdd = false\n          changeSelect = this.tableData.slice()\n        }\n        // 全选时，存在之前已经选上；只加不删\n        changeSelect.forEach((row) => {\n          this.rowChangeAll(row, isAdd)\n        })\n      },\n      // row：表格行；isAdd：是否勾选\n      rowChangeAll(row, isAdd) {\n        const index = this.tableSelectList.findIndex((item) => item[this.rowKey] === row[this.rowKey])\n        // 不存在只能加,存在只能减\n        if (index === -1) {\n          if (isAdd) {\n            this.tableSelectList.push(row)\n          }\n        } else {\n          if (!isAdd) {\n            this.tableSelectList.splice(index, 1)\n          }\n        }\n      },\n      rowSelect() {\n        this.$nextTick(() => {\n          this.tableSelectList.forEach((select) => {\n            const resRow = this.tableData.find((row) => select[this.rowKey] == row[this.rowKey])\n            if (resRow) {\n              this.$refs.elTable.toggleRowSelection(resRow, true)\n            }\n          })\n        })\n      },\n      handleCurrentChange() {\n        this.getList(this.nameStr)\n      },\n      search() {\n        this.pageNum = 1\n        this.getList(this.nameStr)\n      },\n      // tableSelectList 负责记录用户操作的变化；只需要改变 tableData，不管数据是否为全量\n      getList(nameStr) {\n        console.log(\'nameStr===\', nameStr)\n        let source = tableSource\n        if (nameStr) {\n          source = tableSource.filter((item) => item.name.includes(nameStr))\n        }\n        if (this.pageNum === 1) {\n          this.tableData = source.slice(0, 10)\n        } else {\n          this.tableData = source.slice(10)\n        }\n      },\n    },\n  }\n<\/script>\n<style lang="scss" scoped>\n  .search-wrap {\n    .search-input {\n      width: 200px;\n      margin-right: 12px;\n    }\n  }\n  .show-wrap {\n    margin: 12px 0;\n  }\n</style>\n')])])])],2)],1)}),[function(){var e=this,t=e._self._c;return t("h2",{attrs:{id:"biao-ge-xing-xuan-zhong"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#biao-ge-xing-xuan-zhong"}},[e._v("¶")]),e._v(" 表格行选中")])}],!1,null,null,null).exports}}]);